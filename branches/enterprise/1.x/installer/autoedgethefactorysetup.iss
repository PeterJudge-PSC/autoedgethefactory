; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

[InnoIDE_Settings]
LogFile=C:\devarea\staging\aetf\enterprise\1.x\dev\installer\output\compile.log
LogFileOverwrite=true

[Setup]
InternalCompressLevel=Max
OutputBaseFilename=AutoEdgeTheFactorySetup-1.0.8
SolidCompression=true
VersionInfoVersion=1.0.8
VersionInfoCompany=Progress Software Corp.
VersionInfoDescription=OpenEdge AutoEdge|TheFactory Application Example Setup
MinVersion=0,5.0.2195sp3
AppCopyright=Copyright 2011-2012 © Progress Software Corp.
AppName=OpenEdge AutoEdge|TheFactory Application Example
AppVerName=OpenEdge AutoEdge|TheFactory Application Example 1.0.8
InfoAfterFile=installer\include\InfoAfter.txt
InfoBeforeFile=installer\include\InfoBefore.txt
LicenseFile=installer\include\License.txt
DefaultDirName={pf}\OpenEdgeAE\AutoEdge\Factory
EnableDirDoesntExistWarning=true
AllowUNCPath=false
DefaultGroupName=OpenEdge Application Example
DisableStartupPrompt=false
AlwaysShowComponentsList=true
ShowLanguageDialog=auto
SetupIconFile=installer\include\autoedge.ico
AppID={{62CE4B50-E7A0-4279-9889-0D6EC3B80C0E}
VersionInfoTextVersion=1.0.8
AppPublisher=Progress Software Corp.
AppPublisherURL=http://www.progress.com
AppSupportURL=http://communities.progress.com/pcom/community/psdn/openedge/architecture/autoedgethefactory
AppVersion=1.0.8
UninstallDisplayName=OpenEdge AutoEdge|TheFactory Application Example
ExtraDiskSpaceRequired=1000000
AlwaysRestart=false
AllowCancelDuringInstall=true
AlwaysShowDirOnReadyPage=true
AlwaysShowGroupOnReadyPage=true
UninstallLogMode=new
RestartIfNeededByRun=false
SetupLogging=true
OutputDir=installer\output
PrivilegesRequired=none
; Use relative paths?
;SourceDir=..
SourceDir=C:\devarea\aetf\enterprise\1.x\dev
WizardImageBackColor=$00400000
AllowRootDirectory=true
AllowNoIcons=true

[Dirs]
; AETF Application
Name: {app}\autoedgethefactory\shared; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\src; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\cfg; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\shared\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER; Tasks: 

Name: {app}\autoedgethefactory\server; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\bin; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\src; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\temp; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\tests; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\cfg; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\db; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\setup; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\doc; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\resources; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 
Name: {app}\autoedgethefactory\server\logs; Flags: uninsneveruninstall; Components: AETF_SERVER; Tasks: 

Name: {app}\autoedgethefactory\client; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\src; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\cfg; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client\temp; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 
Name: {app}\autoedgethefactory\client; Flags: uninsneveruninstall; Components: AETF_CLIENT; Tasks: 

;OERA: PresentationLayer
Name: {app}\referencecomponents\presentationlayer; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\src; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\temp; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Name: {app}\referencecomponents\presentationlayer\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 

;OERA: EnterpriseServices
Name: {app}\referencecomponents\enterpriseservices; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\src; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\bin; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\doc; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\resource; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\temp; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Name: {app}\referencecomponents\enterpriseservices\tests; Flags: uninsneveruninstall; Components: OERA_ENTERPRISE_SERVICES; Tasks: 

;OERA: BusinessComponents
Name: {app}\referencecomponents\businesscomponents; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\src; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\bin; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\doc; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\temp; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\tests; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Name: {app}\referencecomponents\businesscomponents\resources; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 

;OERA: DataAccess
Name: {app}\referencecomponents\dataaccess; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\src; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\bin; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\doc; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\resources; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\temp; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Name: {app}\referencecomponents\dataaccess\tests; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 

;OERA: CommonInfrastructure (Shared)
Name: {app}\referencecomponents\commoninfrastructure; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 

Name: {app}\referencecomponents\commoninfrastructure\shared; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\src; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\shared\temp; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER; Tasks: 

;OERA: CommonInfrastructure (Client)
Name: {app}\referencecomponents\commoninfrastructure\client; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\src; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\client\temp; Flags: uninsneveruninstall; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT; Tasks: 

;OERA: CommonInfrastructure (Server)
Name: {app}\referencecomponents\commoninfrastructure\server; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\src; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\bin; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\temp; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\tests; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\doc; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 
Name: {app}\referencecomponents\commoninfrastructure\server\resources; Flags: uninsneveruninstall; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER; Tasks: 

;SDK
Name: {app}\referencecomponents\support; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\src; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\bin; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\resources; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\tests; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Name: {app}\referencecomponents\support\temp; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 

; Savvion CustomerOrderProcess Processes
Name: {app}\autoedgethefactory\savvion; Flags: uninsneveruninstall; Components: BPM_MODELS; 

; Installer / Setup
Name: {app}\installer; Flags: uninsneveruninstall; Components: INSTALLER ; Tasks:
Name: {app}\installer\include; Flags: uninsneveruninstall; Components: INSTALLER ; Tasks:

; Root-Doc
Name: {app}\doc; Flags: uninsneveruninstall; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks:

[Files]
; 
;AETF
;client 
Source: autoedgethefactory\client\src\*.*; DestDir: {app}\autoedgethefactory\client\src; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT; Tasks:
Source: autoedgethefactory\client\bin\*.*; DestDir: {app}\autoedgethefactory\client\bin; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT; Tasks: 
Source: autoedgethefactory\client\doc\*.*; DestDir: {app}\autoedgethefactory\client\doc; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT; Tasks: 
Source: autoedgethefactory\client\tests\*.*; DestDir: {app}\autoedgethefactory\client\tests; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT; Tasks: 
Source: autoedgethefactory\client\resources\*.*; DestDir: {app}\autoedgethefactory\client\resources; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_CLIENT; Tasks: 

Source: autoedgethefactory\compile_loadinjectabl.p; DestDir: {app}\autoedgethefactory\; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT AETF_SERVER
Source: autoedgethefactory\client\.project; DestDir: {app}\autoedgethefactory\client; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT
Source: autoedgethefactory\client\.propath; DestDir: {app}\autoedgethefactory\client; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT
Source: autoedgethefactory\client\assemblies.xml; DestDir: {app}\autoedgethefactory\client; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT 

;server
Source: autoedgethefactory\server\src\*.*; DestDir: {app}\autoedgethefactory\server\src; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 
Source: autoedgethefactory\server\bin\*.*; DestDir: {app}\autoedgethefactory\server\bin; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 
Source: autoedgethefactory\server\doc\*.*; DestDir: {app}\autoedgethefactory\server\doc; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 
Source: autoedgethefactory\server\tests\*.*; DestDir: {app}\autoedgethefactory\server\tests; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 
Source: autoedgethefactory\server\resources\*.*; DestDir: {app}\autoedgethefactory\server\resources; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 
Source: autoedgethefactory\server\setup\*.*; DestDir: {app}\autoedgethefactory\server\setup; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER; Tasks: 

Source: autoedgethefactory\server\.propath; DestDir: {app}\autoedgethefactory\server; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER
Source: autoedgethefactory\server\.project; DestDir: {app}\autoedgethefactory\server; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER
Source: autoedgethefactory\server\.dbconnection; DestDir: {app}\autoedgethefactory\server; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER 
Source: autoedgethefactory\server\db\aetf.df; DestDir: {app}\autoedgethefactory\server\db; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER; Tasks:
Source: autoedgethefactory\server\db\aetf.st; DestDir: {app}\autoedgethefactory\server\db; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER; Tasks:
Source: autoedgethefactory\server\db\aetf.bup; DestDir: {app}\autoedgethefactory\server\db; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER; Tasks:

;shared
Source: autoedgethefactory\shared\cfg\*.*; DestDir: {app}\autoedgethefactory\shared\cfg; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Source: autoedgethefactory\shared\src\*.*; DestDir: {app}\autoedgethefactory\shared\src; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Source: autoedgethefactory\shared\bin\*.*; DestDir: {app}\autoedgethefactory\shared\bin; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Source: autoedgethefactory\shared\doc\*.*; DestDir: {app}\autoedgethefactory\shared\doc; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Source: autoedgethefactory\shared\tests\*.*; DestDir: {app}\autoedgethefactory\shared\tests; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
Source: autoedgethefactory\shared\resources\*.*; DestDir: {app}\autoedgethefactory\shared\resources; Excludes: .svn,.*; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER; Tasks: 
 
Source: autoedgethefactory\shared\.propath; DestDir: {app}\autoedgethefactory\shared; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER AETF_CLIENT
Source: autoedgethefactory\shared\.project; DestDir: {app}\autoedgethefactory\shared; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER AETF_CLIENT

;Savvion
Source: autoedgethefactory\savvion\*.*; DestDir: {app}\autoedgethefactory\savvion; Excludes: ".svn, .metadata,*.com.savvion.studio"; Flags: ignoreversion uninsremovereadonly recursesubdirs createallsubdirs touch; Components: BPM_MODELS; 

;OERA - BusinessComponents
Source: referencecomponents\businesscomponents\src\*.*; DestDir: {app}\referencecomponents\businesscomponents\src; Excludes: .svn,.*; Flags: uninsneveruninstall recursesubdirs createallsubdirs touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Source: referencecomponents\businesscomponents\bin\*.*; DestDir: {app}\referencecomponents\businesscomponents\bin; Excludes: .svn,.*; Flags: uninsneveruninstall recursesubdirs createallsubdirs touch skipifsourcedoesntexist; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks:
Source: referencecomponents\businesscomponents\tests\*.*; DestDir: {app}\referencecomponents\businesscomponents\tests; Excludes: .svn,.*; Flags: uninsneveruninstall recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Source: referencecomponents\businesscomponents\doc\*.*; DestDir: {app}\referencecomponents\businesscomponents\doc; Excludes: .svn; Flags: uninsneveruninstall recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
Source: referencecomponents\businesscomponents\resources\*.*; DestDir: {app}\referencecomponents\businesscomponents\resources; Excludes: .svn; Flags: uninsneveruninstall recursesubdirs createallsubdirs skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS; Tasks: 
 
Source: referencecomponents\businesscomponents\.propath; DestDir: {app}\referencecomponents\businesscomponents; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS
Source: referencecomponents\businesscomponents\.project; DestDir: {app}\referencecomponents\businesscomponents; Excludes: .svn; Flags: ignoreversion uninsremovereadonly touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS

;OERA - DataAccess
Source: referencecomponents\dataaccess\src\*.*; DestDir: {app}\referencecomponents\dataaccess\src; Excludes: .svn,.*; Flags: skipifsourcedoesntexist touch uninsneveruninstall recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks:
Source: referencecomponents\dataaccess\bin\*.*; DestDir: {app}\referencecomponents\dataaccess\bin; Excludes: .svn,.*; Flags: skipifsourcedoesntexist touch uninsneveruninstall recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Source: referencecomponents\dataaccess\tests\*.*; DestDir: {app}\referencecomponents\dataaccess\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Source: referencecomponents\dataaccess\doc\*.*; DestDir: {app}\referencecomponents\dataaccess\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
Source: referencecomponents\dataaccess\resources\*.*; DestDir: {app}\referencecomponents\dataaccess\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS; Tasks: 
 
Source: referencecomponents\dataaccess\.propath; DestDir: {app}\referencecomponents\dataaccess; Excludes: .svn; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS
Source: referencecomponents\dataaccess\.project; DestDir: {app}\referencecomponents\dataaccess; Excludes: .svn; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS

;OERA - CommonInfrastructure
;server
Source: referencecomponents\commoninfrastructure\server\src\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\server\src; Excludes: .svn,.*; Flags: skipifsourcedoesntexist touch uninsneveruninstall recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\server\bin\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\server\bin; Excludes: .svn,.*; Flags: skipifsourcedoesntexist touch uninsneveruninstall recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\server\tests\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\server\tests; Excludes: .svn,.*; Flags: skipifsourcedoesntexist touch uninsneveruninstall recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\server\doc\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\server\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\server\resources\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\server\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER

Source: referencecomponents\commoninfrastructure\server\.propath; DestDir: {app}\referencecomponents\commoninfrastructure\server; Excludes: .svn; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\server\.project; DestDir: {app}\referencecomponents\commoninfrastructure\server; Excludes: .svn; Flags: ignoreversion uninsremovereadonly skipifsourcedoesntexist touch; Components: AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_CI_SERVER

;shared
Source: referencecomponents\commoninfrastructure\shared\src\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\shared\src; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER 
Source: referencecomponents\commoninfrastructure\shared\bin\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\shared\bin; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\shared\tests\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\shared\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\shared\doc\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\shared\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\shared\resources\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\shared\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER

Source: referencecomponents\commoninfrastructure\shared\.propath; DestDir: {app}\referencecomponents\commoninfrastructure\shared; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER
Source: referencecomponents\commoninfrastructure\shared\.project; DestDir: {app}\referencecomponents\commoninfrastructure\shared; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER

;client
Source: referencecomponents\commoninfrastructure\client\src\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\client\src; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT
Source: referencecomponents\commoninfrastructure\client\bin\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\client\bin; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT
Source: referencecomponents\commoninfrastructure\client\tests\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\client\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT
Source: referencecomponents\commoninfrastructure\client\doc\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\client\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT
Source: referencecomponents\commoninfrastructure\client\resources\*.*; DestDir: {app}\referencecomponents\commoninfrastructure\client\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT

Source: referencecomponents\commoninfrastructure\client\.propath; DestDir: {app}\referencecomponents\commoninfrastructure\client; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT
Source: referencecomponents\commoninfrastructure\client\.project; DestDir: {app}\referencecomponents\commoninfrastructure\client; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT OERA_PRESENTATION_LAYER OERA_CI_CLIENT

;OERA - EnterpriseServices
Source: referencecomponents\enterpriseservices\src\*.*; DestDir: {app}\referencecomponents\enterpriseservices\src; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Source: referencecomponents\enterpriseservices\bin\*.*; DestDir: {app}\referencecomponents\enterpriseservices\bin; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Source: referencecomponents\enterpriseservices\tests\*.*; DestDir: {app}\referencecomponents\enterpriseservices\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Source: referencecomponents\enterpriseservices\doc\*.*; DestDir: {app}\referencecomponents\enterpriseservices\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
Source: referencecomponents\enterpriseservices\resources\*.*; DestDir: {app}\referencecomponents\enterpriseservices\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: OERA_ENTERPRISE_SERVICES; Tasks: 
 
Source: referencecomponents\enterpriseservices\.propath; DestDir: {app}\referencecomponents\enterpriseservices; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: OERA_ENTERPRISE_SERVICES
Source: referencecomponents\enterpriseservices\.project; DestDir: {app}\referencecomponents\enterpriseservices; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: OERA_ENTERPRISE_SERVICES

;OERA - PresentationLayer
Source: referencecomponents\presentationlayer\src\*.*; DestDir: {app}\referencecomponents\presentationlayer\src; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Source: referencecomponents\presentationlayer\bin\*.*; DestDir: {app}\referencecomponents\presentationlayer\bin; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Source: referencecomponents\presentationlayer\tests\*.*; DestDir: {app}\referencecomponents\presentationlayer\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Source: referencecomponents\presentationlayer\doc\*.*; DestDir: {app}\referencecomponents\presentationlayer\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
Source: referencecomponents\presentationlayer\resources\*.*; DestDir: {app}\referencecomponents\presentationlayer\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: AETF_CLIENT OERA_PRESENTATION_LAYER; Tasks: 
 
Source: referencecomponents\presentationlayer\.propath; DestDir: {app}\referencecomponents\presentationlayer; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT OERA_PRESENTATION_LAYER
Source: referencecomponents\presentationlayer\.project; DestDir: {app}\referencecomponents\presentationlayer; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT OERA_PRESENTATION_LAYER
Source: referencecomponents\presentationlayer\assemblies.xml; DestDir: {app}\referencecomponents\presentationlayer; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT OERA_PRESENTATION_LAYER

;Support
Source: referencecomponents\support\src\*.*; DestDir: {app}\referencecomponents\support\src; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Source: referencecomponents\support\bin\*.*; DestDir: {app}\referencecomponents\support\bin; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks:
Source: referencecomponents\support\tests\*.*; DestDir: {app}\referencecomponents\support\tests; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Source: referencecomponents\support\doc\*.*; DestDir: {app}\referencecomponents\support\doc; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks: 
Source: referencecomponents\support\resources\*.*; DestDir: {app}\referencecomponents\support\resources; Excludes: .svn; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components:AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT ; Tasks: 
 
Source: referencecomponents\support\.propath; DestDir: {app}\referencecomponents\support; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT
Source: referencecomponents\support\.project; DestDir: {app}\referencecomponents\support; Excludes: .svn; Flags: ignoreversion uninsremovereadonly; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT

; Installer
Source: installer\*.*; DestDir: {app}\installer; Excludes: .svn,.*,*.~*; Flags: uninsneveruninstall skipifsourcedoesntexist touch; Components: INSTALLER; 
Source: installer\include\*.*; DestDir: {app}\installer\include; Excludes: .svn,.*,*.~*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: INSTALLER;

; Version
Source: installer\include\version.txt; DestDir: {app}; Excludes: .svn,.*,*.~*; Flags: skipifsourcedoesntexist;

; Setup
Source: installer\include\startdbs.ico; DestDir: {app}\autoedgethefactory\server\cfg; Flags: ignoreversion uninsremovereadonly; Components: AETF_SERVER
Source: installer\include\stopdbs.ico; DestDir: {app}\autoedgethefactory\server\cfg; Flags: ignoreversion uninsremovereadonly; Components: AETF_SERVER

; Root-Doc
Source: doc\*.*; DestDir: {app}\doc; Excludes: .svn,.*; Flags: uninsneveruninstall skipifsourcedoesntexist touch recursesubdirs createallsubdirs; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; Tasks:

[Icons]
; docs
Name: {app}\AutoDox2 doc-comments; Filename: {app}\doc\autodox2-index.html; WorkingDir: {app}; Comment: "AutoDox2 Developer documentation"; 
Name: {app}\Project Page on Progress Communities; Filename: http://communities.progress.com/pcom/community/psdn/openedge/architecture/autoedgethefactory; WorkingDir: {app}; IconFilename: {app}\autoedgethefactory\shared\cfg\aetf.ico; Components: 

;servers
Name: {group}\AutoEdge\Factory Module\{cm:UninstallProgram,AutoEdge}; Filename: {uninstallexe}; Components: 
Name: {group}\AutoEdge\Factory Module\Server\Start All Processes; Filename: {app}\autoedgethefactory\server\cfg\StartAll.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\startdbs.ico; IconIndex: 0; Components: AETF_SERVER
Name: {group}\AutoEdge\Factory Module\Server\Start Database Servers; Filename: {app}\autoedgethefactory\server\cfg\StartDatabases.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\startdbs.ico; IconIndex: 0; Components: AETF_SERVER
Name: {group}\AutoEdge\Factory Module\Server\Start AppServers; Filename: {app}\autoedgethefactory\server\cfg\StartAppServers.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\startdbs.ico; IconIndex: 0; Components: AETF_SERVER
Name: {group}\AutoEdge\Factory Module\Server\Stop All Processes; Filename: {app}\autoedgethefactory\server\cfg\StopAll.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\stopdbs.ico; IconIndex: 0; Components: AETF_SERVER
Name: {group}\AutoEdge\Factory Module\Server\Stop Database Servers; Filename: {app}\autoedgethefactory\server\cfg\StopDatabases.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\stopdbs.ico; IconIndex: 0; Components: AETF_SERVER
Name: {group}\AutoEdge\Factory Module\Server\Stop AppServers; Filename: {app}\autoedgethefactory\server\cfg\StopAppServers.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; IconFilename: {app}\autoedgethefactory\server\cfg\stopdbs.ico; IconIndex: 0; Components: AETF_SERVER

;devenv 
Name: {group}\AutoEdge\Factory Module\Development Environment(Progress Developer Studio for OpenEdge); Filename: {code:getDLCDirectory}\..\DeveloperStudio3.6\eclipse\eclipse.exe;  Parameters: -showlocation -vm {code:getDLCDirectory}\..\DeveloperStudio3.6\jre\bin\javaw.exe; WorkingDir: {app}; Comment: AutoEdge|TheFactory OpenEdge Architect; IconFilename: {app}\autoedgethefactory\shared\resources\aetf.ico; IconIndex: 0; Components: AETF_CLIENT AETF_SERVER OERA_BUSINESS_COMPONENTS OERA_DATA_ACCESS OERA_PRESENTATION_LAYER OERA_ENTERPRISE_SERVICES OERA_CI_CLIENT OERA_CI_SERVER SUPPORT; 

;runtime
Name: {group}\AutoEdge\Factory Module\Client\Dealer Review GUI; Filename: {code:getDLCDirectory}\bin\prowin32.exe; Parameters: "-pf ""autoedgethefactory\client\cfg\client.pf"" -basekey INI -ininame ""autoedgethefactory\client\cfg\client.ini"" -p start_ui.p "; WorkingDir: {app}; Comment: AutoEdge|TheFactory Dealer Review GUI; IconFilename: {app}\autoedgethefactory\shared\resources\aetf.ico; IconIndex: 0; Components: AETF_CLIENT; Tasks: 
Name: {group}\AutoEdge\Factory Module\Client\Admin Console; Filename: {code:getDLCDirectory}\bin\prowin32.exe; Parameters: "-p _edit.p -debugalert -ini autoedgethefactory/client/cfg/client.ini -pf autoedgethefactory/client/cfg/base.pf -basekey INI"; WorkingDir: {app}; Comment: "AutoEdge|TheFactory Client Admin Console (Editor)"; Components: AETF_CLIENT; 
Name: {group}\AutoEdge\Factory Module\Server\Admin Console; Filename: {code:getDLCDirectory}\bin\prowin32.exe; Parameters: "-p _edit.p -debugalert -ini autoedgethefactory/server/cfg/console.ini -pf autoedgethefactory/server/cfg/console.pf  -basekey INI"; WorkingDir: {app}; Comment: "AutoEdge|TheFactory Server Admin Console (Editor)"; Components: AETF_SERVER;

Name: {group}\AutoEdge\Factory Module\Application User List; Filename: {app}\autoedgethefactory\shared\doc\applicationusers.txt; WorkingDir: {app}; Comment: "Application User List";

; Savvion
; SBM portal
Name: "{group}\AutoEdge\Factory Module\BPM Portal"; Filename: {code:getSBMURL}/sbm/bpmportal/login.jsp; Components: BPM_SERVER_SUPPORT; WorkingDir: {app}; 
Name: "{group}\AutoEdge\Factory Module\Customer Vehicle Order Process"; Filename: {code:getSBMURL}/sbm/BizSolo/CustomerVehicleOrderSubmit/Start.jsp; Components: BPM_SERVER_SUPPORT; WorkingDir: {app}; 
 

[Components]
Name: AETF_SERVER; Description: AutoEdge|TheFactory Server Components; Flags: checkablealone; Types: custom compact full
Name: AETF_CLIENT; Description: AutoEdge|TheFactory Client Components; Flags: checkablealone; Types: custom compact full
Name: BPM_MODELS; Description: "Progress|Savvion Models for AutoEdge|TheFactory"; Flags: checkablealone; Types: custom compact full
Name: BPM_SERVER_SUPPORT; Description: "Progress|Savvion Models for AutoEdge|TheFactory"; Types: custom compact full; 
Name: OERA_PRESENTATION_LAYER; Description: OERA Presentation Layer Components; Flags: checkablealone; Types: custom compact full
Name: OERA_ENTERPRISE_SERVICES; Description: OERA Enterprise Services Layer Components; Flags: checkablealone; Types: custom compact full
Name: OERA_CI_CLIENT; Description: OERA Common Infrastructure Client Layer Components; Flags: checkablealone; Types: custom compact full
Name: OERA_CI_SERVER; Description: OERA Common Infrastructure Server Layer Components; Flags: checkablealone; Types: custom compact full
Name: OERA_BUSINESS_COMPONENTS; Description: OERA Business Components Layer Components; Flags: checkablealone; Types: custom compact full
Name: OERA_DATA_ACCESS; Description: OERA Data Access Layer Components (incl. Data Source Layer); Flags: checkablealone; Types: custom compact full
Name: SUPPORT; Description: General Support Libraries; Flags: checkablealone; Types: custom compact full
Name: INSTALLER; Description: Installer support files; Flags: checkablealone; Types: custom compact full

[_ISTool]
UseAbsolutePaths=false
LogFile={src}\installer\output\compile.log
LogFileAppend=false
[UninstallRun]
Filename: {app}\autoedgethefactory\server\cfg\StopAll.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; Components: AETF_SERVER
Filename: {app}\autoedgethefactory\server\cfg\UninstallAppserver.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; Components: AETF_SERVER; Flags: SkipIfDoesntExist NoWait
Filename: {app}\autoedgethefactory\server\cfg\UninstallDatabase.cmd; WorkingDir: {app}\autoedgethefactory\server\cfg; Components: AETF_SERVER; Flags: SkipIfDoesntExist NoWait

[Code]
{ === CODE Section for AutoEdge|TheFactory Setup IIS ======================== }
{ =																			= }
{ =		InnoSetup Script code part for installing the AutoEdge|TheFactory   = }
{ =		application															= }
{ =																			= }
{ =		Created:	Jan 2011; based on AutoEdge Dealership setup files		= }
{ =		Author: 	Peter Judge, pjudge@progress.com						= }
{ =																			= }
{ =========================================================================== }

{ === Include the Custom Wizard Pages and support code for them. ============ }

#include "include\wizardpages\adminports.inc"
#include "include\wizardpages\bpmserverports.inc"
#include "include\wizardpages\appserverclient.inc"
#include "include\wizardpages\asbrokerports.inc"
#include "include\wizardpages\dbbrokerports.inc"
#include "include\wizardpages\openedgerelease.inc"


{ =========================================================================== }

const
	numControls = 2;

var
	bShowDebugMsg				: boolean;		// This controls debug messages
	strLogFilename				: string;
	strDLCDirectory				: string;
	iAdminServerPortPageID		: integer;
	iDBBrokerPortsPageID		: integer;
	iASBrokerPortsPageID	  : integer;
	iAppServerClientPageID	  : integer;
	iOpenEdgeReleaseID       : integer;
	iBpmServerPageID			    : integer;
	strMinDLCMajor				: string;
	intMinDLCMinor				: integer;
	serverConfigXML, clientConfigXML, sharedConfigXML : Variant;  

{ Show Debug messages }
procedure DebugMsg( s : string );
begin
	if bShowDebugMsg then
		MsgBox( s, mbInformation, MB_OK );

	Log(s);
end;

{	Return the strDLCDirectory value }
function getDLCDirectory( str : string ) : string;
begin
	Result := strDLCDirectory;
end;

{	Return the strDLCDirectory value }
function getSBMURL( str : string ) : string;
begin
    if (isComponentSelected('BPM_SERVER_SUPPORT')) then
    begin
    	Result := 'http://' + txtBpmServerHost.Text + ':' + txtBpmServerPort.Text;
    end;
	Result := '';
end;

{ 	Return the CLASSPATH value }
function getClassPath( str : string ) : string;
begin
	Result := GetEnv( 'CLASSPATH' );
end;

{ === FUNCTION setDLCDirectory ========================================================== }
{ =																						= }
{ =		Function to set the DLC value of the installed OpenEdge release or the one		= }
{ =		selected by the user during the install.										= }
{ =																						= }
{ ======================================================================================= }

function setDLCDirectory() : boolean;
var
	strKey	 : string;
	strValue : string;
	intValue : longint;
	DLCVersions: TArrayOfString;
	iLoop: integer;
	intLenDLC: integer;
	strVersion: String;
begin
	DebugMsg( 'setDLCDirectory()' );

	{ If the OpenEdgeVesion variable is set to anything sensible we will	}
	{ have to use that as it is the OpenEdge version the user selected.		}
    if Length( OpenEdgeVersion ) > 0 then
    begin
		strMinDLCMajor := OpenEdgeVersion;
		intMinDLCMinor := 0;
	end;

	Result := false;

	{ ServicePack version installed can be found in registry:				}
	{ HKEY_LOCAL_MACHINE\SOFTWARE\PSC\PROGRESS\<Version>\ServicePack\Level	}

	{ Maybe we have a Beta or some other pre-release installed? If so we    }
	{ will pick up the latest release if more versions are installed on the }
	{ machine.																}
	RegGetSubkeyNames(HKLM, 'Software\PSC\PROGRESS', DLCVersions);

	strVersion := '';
	intLenDLC := Length(strMinDLCMajor);
	for iLoop := 0 to GetArrayLength(DLCVersions)-1 do
	begin
		strValue := Copy(DLCVersions[iLoop], 0, intLenDLC);
		if strValue = strMinDLCMajor then
		begin
			strVersion := DLCVersions[iLoop];
			{ Gets us outta here }
			iLoop := GetArrayLength(DLCVersions);
		end;
	end;

	DebugMsg(' using = ' + strVersion);

	{ Get the location of DLC commands }
	if RegQueryStringValue( HKLM, 'Software\PSC\PROGRESS\' + strVersion + '\Startup', 'DLC', strValue ) then
	begin
		strDLCDirectory := strValue;
		Result := true;
	end;

	{If a minimum service pack is specified, check that it's installed }
	if intMinDLCMinor > 0 then
	begin
		if RegKeyExists(HKLM, 'Software\PSC\Progress\' + strVersion + '\ServicePack' ) then
		begin
			RegQueryStringValue( HKLM, 'Software\PSC\PROGRESS\' + strVersion + '\ServicePack', 'Level', strValue );
			if StrToInt(strValue) = intMinDLCMinor then
				Result := true;
		end;
	end;

	if Result = true then
		DebugMsg('using DLC ' + strVersion + ' SP ' + IntToStr(intMinDLCMinor) );
end;

{ === PROCEDURE writeLogEntry =========================================================== }
{ =																						= }
{ =		Procedure which takes care of writing entries in a setup log file for later		= }
{ =		reviewing.																		= }
{ =																						= }
{ ======================================================================================= }

procedure writeLogEntry( const s : string );
begin
	SaveStringToFile( strLogFilename, s, true );
end;

{ === FUNCTION InitializeSetup ========================================================== }
{ =																						= }
{ =		Event procedure for initializing the setup wizard								= }
{ =																						= }
{ =		This function gets called when the setup initializes. This is where we want to	= }
{ =		grab initial values and other things we need to do the setup.					= }
{ =																						= }
{ ======================================================================================= }

function InitializeSetup() : boolean;
begin
	bShowDebugMsg := false;		// Setting this to TRUE will enable debug messages!
//	bShowDebugMsg := true;		// Setting this to FALSE will disable debug messages!
	Result        := true;
	strMinDLCMajor := '11.0.0';
	intMinDLCMinor := 0;	// not always used: use 0 when not in use

	DebugMsg( 'Running InitializeSetup()' );

	{ Initialize logging }

	{	Get the PROGRESS DLC Information }
	{ If this check fails, we have to bail since there is nothing left to 	}
	{	do really when PROGRESS is not installed.							}

//  if not setDLCDirectory() then
//  begin
//		MsgBox( 'This version of AutoEdge requires OpenEdge ' + strMinDLCMajor + ' or higher', mbError, MB_OK );
//		Result := false;
//	end
//	else

end;

{ === PROCEDURE CreateCustomWizardPages ================================================= }
{ =																						= }
{ =		Procedure for creating the new custom wizard pages								= }
{ =																						= }
{ ======================================================================================= }

procedure CreateCustomWizardPages;
begin
	DebugMsg( 'Running CreateCustomWizardPages()' );

	{ === Add out own custom pages to the setup wizard === }

	{ Progress|OpenEdge Release to use for this installation }
	iOpenEdgeReleaseID := OpenEdgeRelease_CreatePage( wpSelectComponents );

	{ Progress|OpenEdge AdminServer Port Page }
	iAdminServerPortPageID := AdminPort_CreatePage( iOpenEdgeReleaseID );

	{ Progress|OpenEdge Database Broker Ports Page }
	iDBBrokerPortsPageID := DBBrokerPorts_CreatePage( iAdminServerPortPageID );

	{ Progress|OpenEdge AppServer Broker Ports Page }
	iASBrokerPortsPageID := ASBrokerPorts_CreatePage( iDBBrokerPortsPageID );

	{ Progress|OpenEdge AppServer Client Page }
	iAppServerClientPageID := AppServerClient_CreatePage( iASBrokerPortsPageID );

	{ Progress|Savvion Server Host and Port Page }
	iBpmServerPageID := BpmServer_CreatePage( iASBrokerPortsPageID );

end;

{ === PROCEDURE BtnAboutOnClick ========================================================= }
{ =																						= }
{ =		Event Handler Procedure for Click on About Button								= }
{ =																						= }
{ ======================================================================================= }

procedure BtnAboutOnClick( Sender : TObject );
var
	Path 		: string;
	MsgAbout	: string;
	FreeMB 		: cardinal;
	TotalMB 	: cardinal;
begin
	{ Get and display free megabytes on the Program Files drive }
	MsgAbout	:= 'AutoEdge|TheFactory Setup Version 1.0.8';
	Path 		:= ExpandConstant('{pf}');

	if GetSpaceOnDisk(Path, True, FreeMB, TotalMB) then
	begin
		MsgAbout := MsgAbout + #13#10#13#10 + 'There are ' + IntToStr(FreeMB) + ' megabytes free on ' + Path;
	end;

	MsgBox( MsgAbout, mbInformation, MB_OK );
end;

{ === PROCEDURE LabelURLOnClick ========================================================= }
{ =																						= }
{ =		Event Handler Procedure for Click on URL Label									= }
{ =																						= }
{ ======================================================================================= }

procedure LabelURLOnClick( Sender : TObject );
var
	ErrorCode : Integer;
begin
	ShellExec( 'open', 'http://web.progress.com/index.ssp', '', '', SW_SHOWNORMAL, ewNoWait, ErrorCode );
end;

{ === PROCEDURE InitializeWizard ======================================================== }
{ =																						= }
{ =		Setup Wizard Initialization Procedure											= }
{ =																						= }
{ =		This procedure will create custom wizard pages (such as the broker ports page)	= }
{ =		and put them into the setup sequence at the wanted place (after the welcome		= }
{ =		page for example).																= }
{ =																						= }
{ =		This procedure is an event handler and will be called by the Inno Setup			= }
{ =		Utility.																		= }
{ =																						= }
{ ======================================================================================= }

procedure InitializeWizard();
var
	btnAbout	: TButton;
	btnCancel 	: TButton;
	lblURL 		: TNewStaticText;
begin
	DebugMsg( 'Running InitializeWizard()' );

	{ Create the custom wizard pages }
	CreateCustomWizardPages();

	{ Put the rest of the custom controls on }
	btnCancel := WizardForm.CancelButton;

	{ The About Button }
	btnAbout			:= TButton.Create( WizardForm );
	btnAbout.Left		:= WizardForm.ClientWidth - btnCancel.Left - btnCancel.Width;
	btnAbout.Top		:= btnCancel.Top;
	btnAbout.Width		:= btnCancel.Width;
	btnAbout.Height		:= btnCancel.Height;
	btnAbout.Caption	:= '&About...';
	btnAbout.OnClick	:= @BtnAboutOnClick;
	btnAbout.Parent		:= WizardForm;

	{ The URL Label }
	lblURL 				:= TNewStaticText.Create( WizardForm );
	lblURL.Caption		:= 'web.progress.com';
	lblURL.Cursor		:= crHand;
	lblURL.OnClick		:= @LabelURLOnClick;
	lblURL.Parent		:= WizardForm;
	lblURL.Font.Style	:= lblURL.Font.Style + [fsUnderline];
	lblURL.Font.Color	:= clBlue;
	lblURL.Top 			:= btnAbout.Top + btnAbout.Height - lblURL.Height - 2;
	lblURL.Left 		:= btnAbout.Left + btnAbout.Width + ScaleX( 20 );

end;

{ === PROCEDURE DoProstructRepair ======================================================= }
{ =																						= }
{ =		Run a PROSTRCT REPAIR session on the database to make it fit the new directory	= }
{ =																						= }
{ ======================================================================================= }

procedure DoProstructRepair( strDatabase : string );
var
	ret		: integer;
	bRet	: boolean;
	strCmd	: string;
begin
	Debugmsg( 'Repairing Database Structure [ ' + strDatabase + ' ]' );

	{ Create the PROSTRCT command }
	strCmd := strDLCDirectory + '\bin\prostrct.bat';

	bRet := Exec( strCmd ,
				  'repair ' + strDatabase,
				  ExpandConstant( '{app}' ),
				  SW_HIDE,
				  ewWaitUntilTerminated,
				  ret );

	if not bRet then
		MsgBox( 'Return code: ' + SysErrorMessage( ret ), mbInformation, MB_OK );
end;

{ === PROCEDURE DoProRestore ============================================================ }
{ =																						= }
{ =		Run a PROREST session on the given database to restore it into new directory.	= }
{ =																						= }
{ ======================================================================================= }

procedure DoProRestore( strTarget, strSource, strDirectory : string );
var
	ret		: integer;
	bRet	: boolean;
	strCmd	: string;
begin
	DebugMsg( 'Restoring Database [ ' + strTarget + ' ]' + ' from ' + strSource);

	{ Create the PROREST command }
	strCmd := strDLCDirectory + '\bin\prorest.bat';

	bRet := Exec( strCmd ,
				  '"' + strTarget + '" "' + strSource + '"',
				  strDirectory,
				  SW_HIDE,
				  ewWaitUntilTerminated,
				  ret );

	if not bRet then
		MsgBox( 'Return code: ' + intToStr( ret ) + ' [ ' + SysErrorMessage( ret ) + ' ]', mbInformation, MB_OK );
end;

procedure DoMergeProperties( strAction, strPropertyType, strTarget, strSource, strDirectory : string );
var
	ret		: integer;
	bRet	: boolean;
	strCmd	: string;
begin
	DebugMsg( 'Mergine properties from [ ' + strTarget + ' ]' );
	{ mergeprop <parameter> ...
	<parameter>:
		  -action <list|listall> <property group>
					or
		  -action <update|create|delete>
		  -delta  <file>
		  -type   <database|ubroker|plugin|tools|none>
		  -target <file>
		  -validate
		  -nobackup
		  -recurse  (-type database only)
		  -silent		}

	{ Create the MERGEPROP command }
	strCmd := strDLCDirectory + '\bin\mergeprop.bat';

	bRet := Exec( strCmd ,
			     ' -action ' + strAction + ' -delta "' + strSource + '" -target "' + strTarget + '" -type ' + strPropertyType,
				  strDirectory,
				  SW_HIDE,
				  ewWaitUntilTerminated,
				  ret );

	if not bRet then
		MsgBox( 'Return code: ' + intToStr( ret ) + ' [ ' + SysErrorMessage( ret ) + ' ]', mbInformation, MB_OK );
end;

procedure DoUpdateServerConfigFiles;
var
	FileName, Propath, FileBody	: string;
  ChildNode, ParentNode : Variant;  
//  Path: String;
begin
		DebugMsg( 'Creating Server config files' );
		
    { Create the server.pf file }
    FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\server.pf' );
    SaveStringToFile( FileName,
                      '# AutoEdge|TheFactory Database Connection'                                 + #13#10 +
                      '-param CFGFILE=./autoedgethefactory/server/cfg/config.xml,CFGNAME=default' + #13#10 + 
                      '-pf ./autoedgethefactory/shared/cfg/shared.pf'                             + #13#10 +
                      '-T  ./autoedgethefactory/server/temp'                                      + #13#10 +
                      '# eof'                                                                     + #13#10,
                      false );

    { Create the console.pf file }
    FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\console.pf' );
    SaveStringToFile( FileName,
                      '# AutoEdge|TheFactory Server Admin Console Parameter File'   + #13#10 +
                      '# AutoEdge|TheFactory Database Connection'                   + #13#10 + 
                      '-db ./autoedgethefactory/server/db/aetf.db -ld aetf  -H ' 
                      + txtAETFDBHost.Text + ' -S ' + txtAETFDBService.Text         + #13#10 +
                      '-pf ./autoedgethefactory/shared/cfg/shared.pf'               + #13#10 +
                      '-T  ./autoedgethefactory/server/temp'                        + #13#10 +
                      '# eof'                                                       + #13#10,
                      false );

    { ===  Server Console INI file === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\console.ini' );		
		FileCopy(ExpandConstant('{code:getDLCDirectory}\bin\progress.ini'), FileName, false);
		
    Propath := ExpandConstant('.\autoedgethefactory\server\bin,.\autoedgethefactory\shared\bin,.\referencecomponents\businesscomponents\bin,.\referencecomponents\dataaccess\bin,.\referencecomponents\enterpriseservices\bin,.\referencecomponents\commoninfrastructure\server\bin,.\referencecomponents\commoninfrastructure\shared\bin,.\referencecomponents\support\bin,.\autoedgethefactory\server\src,.\autoedgethefactory\shared\src,.\referencecomponents\businesscomponents\src,.\referencecomponents\dataaccess\src,.\referencecomponents\enterpriseservices\src,.\referencecomponents\commoninfrastructure\server\src,.\referencecomponents\commoninfrastructure\shared\src,.\referencecomponents\support\src,.\autoedgethefactory\server\tests,.\autoedgethefactory\shared\tests,{code:getDLCDirectory},{code:getDLCDirectory}\bin');    
		SetIniString( 'Startup', 'PROPATH', Propath, FileName );
		
		Propath := ExpandConstant('.,{code:getDLCDirectory}\tty,{code:getDLCDirectory},{code:getDLCDirectory}\bin');
		SetIniString( 'WinCharStartup', 'PROPATH', Propath, FileName );		
		
		{ === StartDatabases.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StartDatabases.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "%DLC%\bin\dbman.bat" -db ' + txtAETFDBName.Text + ' -start -port ' + txtAdminServerPort.Text + #13#10 ,
						  false );

		{ === StopDatabases.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StopDatabases.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "%DLC%\bin\dbman.bat" -db ' + txtAETFDBName.Text + ' -stop -port ' + txtAdminServerPort.Text + #13#10 ,
						  false );

		{ === StartAppservers.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StartAppservers.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "%DLC%\bin\asbman.bat" -i ' + txtAEFAppserverName.Text + ' -start -port ' + txtAdminServerPort.Text + #13#10,
						  false );

		{ === StopAppservers.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StopAppservers.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "%DLC%\bin\asbman.bat" -i ' + txtAEFAppserverName.Text + ' -stop -port ' + txtAdminServerPort.Text + #13#10,
						  false );

		{ === StartAll.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StartAll.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "' + ExpandConstant( '{app}\autoedgethefactory\server\cfg\StartDatabases.cmd' ) + '" ' + #13#10#13#10 +
						  'CALL "' + ExpandConstant( '{app}\autoedgethefactory\server\cfg\StartAppservers.cmd' ) + '" ' + #13#10#13#10,
						  false );

		{ === StopAll.cmd === }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\StopAll.cmd' );

		{ Put the body in }
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "' + ExpandConstant( '{app}\autoedgethefactory\server\cfg\StopDatabases.cmd' ) + '" ' + #13#10#13#10 +
						  'CALL "' + ExpandConstant( '{app}\autoedgethefactory\server\cfg\StopAppservers.cmd' ) + '" ' + #13#10#13#10,
						  false );

    { ABL session config file }
    //Get the config node.
    ParentNode := serverConfigXML.selectSingleNode('/configs/config[name="default"]');

    // database connection
    ChildNode := serverConfigXML.createElement('serverconnection');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;

    ChildNode := serverConfigXML.createElement('type');
    ChildNode.text := 'database';
    ParentNode.appendChild(ChildNode);
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'dbAutoEdgeTheFactory';    // logical name used by the application code
    ParentNode.appendChild(ChildNode);

    // parameter for -db / Physical DB name./ Must be < 11 chars@! 
    ChildNode := serverConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'db';    
    ParentNode.appendChild(ChildNode);
    ChildNode := serverConfigXML.createElement('value');
    ChildNode.text := './autoedgethefactory/server/db/aetf.db';
    ParentNode.appendChild(ChildNode);

    // back up to serverconnection
    ParentNode := ChildNode.parentNode.parentNode;
    
    // parameter for -ld / logical DB name 
    ChildNode := serverConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'ld';    
    ParentNode.appendChild(ChildNode);
    ChildNode := serverConfigXML.createElement('value');
    ChildNode.text := 'aetf';    
    ParentNode.appendChild(ChildNode);
    
    // back up to serverconnection
    ParentNode := ChildNode.parentNode.parentNode;
    
    // parameter for -H
    ChildNode := serverConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'H';    
    ParentNode.appendChild(ChildNode);
    ChildNode := serverConfigXML.createElement('value');
    ChildNode.text := txtAETFDBHost.Text;    
    ParentNode.appendChild(ChildNode);
    
    // back up to serverconnection
    ParentNode := ChildNode.parentNode.parentNode;
    
    // parameter for -S 
    ChildNode := serverConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'S';    
    ParentNode.appendChild(ChildNode);
    ChildNode := serverConfigXML.createElement('value');
    ChildNode.text := txtAETFDBService.Text;    
    ParentNode.appendChild(ChildNode);
    
    if (isComponentSelected('BPM_SERVER_SUPPORT')) then
    begin
      // Back up to config, for another server connection   
      ParentNode := serverConfigXML.selectSingleNode('/configs/config[name="default"]');
      
      // bpm server connection
      ChildNode := serverConfigXML.createElement('serverconnection');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
  
      ChildNode := serverConfigXML.createElement('type');
      ChildNode.text := 'bpmserver';
      ParentNode.appendChild(ChildNode);
      ChildNode := serverConfigXML.createElement('name');
      ChildNode.text := 'bpmAutoEdgeTheFactory';    
      ParentNode.appendChild(ChildNode);
      ChildNode := clientConfigXML.createElement('enabled');
      ChildNode.text := 'true';    
      ParentNode.appendChild(ChildNode);
         
      // parameter for host
      ChildNode := serverConfigXML.createElement('parameter');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
      ChildNode := serverConfigXML.createElement('name');
      ChildNode.text := 'host';    
      ParentNode.appendChild(ChildNode);
      ChildNode := serverConfigXML.createElement('value');
      ChildNode.text := txtBpmServerHost.Text;    
      ParentNode.appendChild(ChildNode);
  
      // back up to serverconnection
      ParentNode := ChildNode.parentNode.parentNode;
      
      // parameter for port
      ChildNode := serverConfigXML.createElement('parameter');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
      ChildNode := serverConfigXML.createElement('name');
      ChildNode.text := 'port';    
      ParentNode.appendChild(ChildNode);
      ChildNode := serverConfigXML.createElement('value');
      ChildNode.text := txtBpmServerPort.Text;    
      ParentNode.appendChild(ChildNode);
      end;    	
end;

procedure DoUpdateClientConfigFiles;
var
	FileName, Propath, FileBody	: string;
  ChildNode, ParentNode : Variant;  
//  Path: String;
begin
		DebugMsg( 'Creating Factory Client config files' );

		FileName := ExpandConstant( '{app}\autoedgethefactory\client\cfg\client.pf' );
		SaveStringToFile( FileName,
						  '# PF for AutoEdge|TheFactory Client session'             + #13#10 +
						  '-param CFGFILE=./autoedgethefactory/client/cfg/config.xml,CFGNAME=default' + #13#10 +						  
						  '-pf  ./autoedgethefactory/client/cfg/base.pf ' ,
						  false );

    { Create the console.pf file }
    FileName := ExpandConstant( '{app}\autoedgethefactory\client\cfg\base.pf' );
    SaveStringToFile( FileName,
                      '# AutoEdge|TheFactory Client Base Parameter File' + #13#10 + 
						          '-pf  ./autoedgethefactory/shared/cfg/shared.pf '  + #13#10 +
        						  '-T   ./autoedgethefactory/client/temp ' 					 + #13#10 +
				        		  '-assemblies ./autoedgethefactory/client '         + #13#10 +
                      '# eof'                                            + #13#10,
                      false );
    
		FileName := ExpandConstant( '{app}\autoedgethefactory\client\cfg\client.ini');
		FileCopy(ExpandConstant('{code:getDLCDirectory}\bin\progress.ini'), FileName, false);
		
    Propath := ExpandConstant('.\autoedgethefactory\client\bin,.\autoedgethefactory\shared\bin,.\referencecomponents\presentationlayer\bin,.\referencecomponents\enterpriseservices\bin,.\referencecomponents\commoninfrastructure\client\bin,.\referencecomponents\commoninfrastructure\shared\bin,.\referencecomponents\support\bin,.\autoedgethefactory\client\src,.\autoedgethefactory\shared\src,.\referencecomponents\presentationlayer\src,.\referencecomponents\enterpriseservices\src,.\referencecomponents\commoninfrastructure\client\src,.\referencecomponents\commoninfrastructure\shared\src,.\referencecomponents\support\src,.\autoedgethefactory\client\doc,.\autoedgethefactory\shared\doc,.\referencecomponents\presentationlayer\doc,.\referencecomponents\enterpriseservices\doc,.\referencecomponents\commoninfrastructure\client\doc,.\referencecomponents\commoninfrastructure\shared\doc,.\referencecomponents\support\doc,.\autoedgethefactory\client\tests,.\autoedgethefactory\shared\tests,{code:getDLCDirectory}\gui,{code:getDLCDirectory},{code:getDLCDirectory}\bin');
		SetIniString( 'Startup', 'PROPATH', Propath, FileName );

		Propath := ExpandConstant('.,{code:getDLCDirectory}\tty,{code:getDLCDirectory},{code:getDLCDirectory}\bin');
		SetIniString( 'WinCharStartup', 'PROPATH', Propath, FileName );
				
    { ABL session config file }
    ParentNode := clientConfigXML.selectSingleNode('/configs/config[name="default"]');

    // properties 
    ChildNode := clientConfigXML.createElement('property');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;

    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'AppRoot';
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('value');
    ChildNode.text := ExpandConstant('{app}');
    ParentNode.appendChild(ChildNode);
    
    // back up to root
    ParentNode := ChildNode.parentNode.parentNode;
    
    // database connection
    ChildNode := clientConfigXML.createElement('serverconnection');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;        

    ChildNode := clientConfigXML.createElement('type');
    ChildNode.text := 'appserver';
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'asAutoEdgeTheFactory';    // logical name used by the application code
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('enabled');
    ChildNode.text := 'true';    
    ParentNode.appendChild(ChildNode);
    
    // parameter for AppService 
    ChildNode := clientConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'AppService';    
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('value');
    ChildNode.text := txtAETFASClientName.Text;    
    ParentNode.appendChild(ChildNode);
    
    // back up to serverconnection
    ParentNode := ChildNode.parentNode.parentNode;
    
    // parameter for host
    ChildNode := clientConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'H';    
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('value');
    ChildNode.text := txtAETFASHost.Text;    
    ParentNode.appendChild(ChildNode);
    
    // back up to serverconnection
    ParentNode := ChildNode.parentNode.parentNode;
    
    // parameter for sessionModel
    ChildNode := clientConfigXML.createElement('parameter');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'sessionModel';    
    ParentNode.appendChild(ChildNode);
    ChildNode := clientConfigXML.createElement('value');
    ChildNode.text := 'session-free';    
    ParentNode.appendChild(ChildNode);
    
    if (isComponentSelected('BPM_SERVER_SUPPORT')) then
    begin    
      // Back up to config, for another server connection   
      ParentNode := clientConfigXML.selectSingleNode('/configs/config[name="default"]');   
      
      // bpm server connection
      ChildNode := clientConfigXML.createElement('serverconnection');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
  
      ChildNode := clientConfigXML.createElement('type');
      ChildNode.text := 'bpmserver';
      ParentNode.appendChild(ChildNode);
      ChildNode := clientConfigXML.createElement('name');
      ChildNode.text := 'bpmAutoEdgeTheFactory';    
      ParentNode.appendChild(ChildNode);
      ChildNode := clientConfigXML.createElement('enabled');
      ChildNode.text := 'true';    
      ParentNode.appendChild(ChildNode);
         
      // parameter for host
      ChildNode := clientConfigXML.createElement('parameter');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
      ChildNode := clientConfigXML.createElement('name');
      ChildNode.text := 'host';    
      ParentNode.appendChild(ChildNode);
      ChildNode := clientConfigXML.createElement('value');
      ChildNode.text := txtBpmServerHost.Text;    
      ParentNode.appendChild(ChildNode);
  
      // back up to serverconnection
      ParentNode := ChildNode.parentNode.parentNode;
      
      // parameter for port
      ChildNode := clientConfigXML.createElement('parameter');
      ParentNode.appendChild(ChildNode);
      ParentNode := ChildNode;
      ChildNode := clientConfigXML.createElement('name');
      ChildNode.text := 'port';    
      ParentNode.appendChild(ChildNode);
      ChildNode := clientConfigXML.createElement('value');
      ChildNode.text := txtBpmServerPort.Text;    
      ParentNode.appendChild(ChildNode);
    end;        	
end;

{ === PROCEDURE DoUpdateConfigFiles ===================================================== }
{ =																						= }
{ =		Make changes to the configuration files to reflect the new directory where		= }
{ =		the AutoEdge App will be put. The config files are shortcuts, Progress PF		= }
{ =		files and the likes.															= }
{ =																						= }
{ ======================================================================================= }

procedure DoUpdateConfigFiles;
begin
	DebugMsg( 'Updating Configuration Files' );

	{ === Create the necessary PF files === }
	{ Server only }
	if isComponentSelected( 'AETF_SERVER' ) then
	   DoUpdateServerConfigFiles;

	{ Progress GUI Client only }
	if isComponentSelected( 'AETF_CLIENT' ) then
	 DoUpdateClientConfigFiles;
end;

{ === PROCEDURE DoAddDatabase2ConmgrFile ================================================ }
{ =																						= }
{ =		Add the required database to the conmgr.properties file.						= }
{ =																						= }
{ ======================================================================================= }

procedure DoAddDatabase2ConmgrFile( PropFileName, EntryName, DisplayName, DatabaseFilename, Port : string );
var
	Section		: string;
begin
	{ Create the EntryName database entries }
	Section := 'database.' + EntryName;
	if not IniKeyExists( Section, 'displayname', PropFileName) then
	begin
		DebugMsg( 'Creating ' + EntryName + ' entries' );

		{ Write the [database.EntryName] keys }
		SetIniString( Section, 'configurations', EntryName + '.defaultconfiguration', PropFileName );
		SetIniString( Section, 'databasename', DatabaseFilename, PropFileName );
		SetIniString( Section, 'defaultconfiguration', EntryName + '.defaultconfiguration', PropFileName );
		SetIniString( Section, 'displayname', DisplayName, PropFileName );
		SetIniString( Section, 'autostart', 'true', PropFileName );	

		{ Write the [configuration.EntryName.defaultconfiguration] keys }
		Section := 'configuration.' + EntryName + '.defaultconfiguration';
		SetIniString( Section, 'asynchronouspagewriters', '0', PropFileName );
		SetIniString( Section, 'beforeimageprocess', 'false', PropFileName );
		SetIniString( Section, 'database', EntryName, PropFileName );
		SetIniString( Section, 'displayname', 'defaultConfiguration', PropFileName );
		SetIniString( Section, 'servergroups', EntryName + '.defaultconfiguration.defaultservergroup', PropFileName );
		SetIniString( Section, 'watchdogprocess', 'false', PropFileName );

		{ Write the [servergroup.EntryName.defaultconfiguration.defaultservergroup] keys }
		Section := 'servergroup.' + EntryName + '.defaultconfiguration.defaultservergroup';
		SetIniString( Section, 'configuration', EntryName + '.defaultconfiguration', PropFileName );
		SetIniString( Section, 'displayname', 'defaultServerGroup', PropFileName );
		SetIniString( Section, 'port', Port, PropFileName );
	end;
end;

{ === PROCEDURE DoUpdateConmgrPropertiesFile ============================================ }
{ =																						= }
{ =		Add the required databases to the conmgr.properties file.						= }
{ =																						= }
{ ======================================================================================= }

procedure DoUpdateConmgrPropertiesFile;
var
	FileName	: string;
	DBPropsFile : string;
begin
	if isComponentSelected( 'AETF_SERVER' ) then
	begin
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\aetf.conmgr.properties' );
		DBPropsFile := FileName;
		{ Make sure the file exists (it shouldn't, so create) }
		SaveStringToFile(FileName, '', false);

		{ === AutoEdge|TheFactory ======================================================== }
		DoAddDatabase2ConmgrFile( FileName,
								  txtAETFDBName.Text,
								  txtAETFDBName.Text,
								  ExpandConstant( '{app}\autoedgethefactory\server\db\aetf.db' ),
								  txtAETFDBService.Text );

		{ merge to installed properties file in DLC }
		DoMergeProperties('update',
						  'database',
						  ExpandConstant('{code:getDLCDirectory}\properties\conmgr.properties'),
						  FileName,
						  ExpandConstant('{app}\autoedgethefactory\server'));

    { create uninstall for ubroker file }
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\UninstallDatabase.cmd' );

		{ Put the body in }
	{ mergeprop <parameter> ...
	<parameter>:
		  -action <list|listall> <property group>
					or
		  -action <update|create|delete>
		  -delta  <file>
		  -type   <database|ubroker|plugin|tools|none>
		  -target <file>
		  -validate
		  -nobackup
		  -recurse  (-type database only)
		  -silent		}
		SaveStringToFile( FileName,
						  '@ECHO OFF' + #13#10 +
						  'SET DLC=' + strDLCDirectory + #13#10 +
						  'SET PATH=%DLC%\bin;%PATH%' + #13#10#13#10 +
						  'REM' + #13#10#13#10 +
						  'CALL "%DLC%\bin\mergeprop.bat" -action delete -delta ' + DBPropsFile + ' -target ' + ExpandConstant('{code:getDLCDirectory}\properties\conmgr.properties') +#13#10 +
						  'CALL "%DLC%\bin\prodel.exe" delete ' + ExpandConstant( '{app}\autoedgethefactory\server\db\aetf.db' ) + ' < input_yes.txt ' +#13#10 ,
						  false);
	end;
end;

{ === PROCEDURE DoAddBroker2UBrokerFile ================================================= }
{ =																						= }
{ =		Add the required broker to the ubroker.properties file.							= }
{ =																						= }
{ ======================================================================================= }

procedure DoAddBroker2UBrokerFile( PropFileName, Section, EntryName, OpMode, Port, Propath, Startup, UUID, WorkDir : string );
begin
	if not IniKeyExists( Section, 'appserviceNameList', PropFileName) then
	begin
		DebugMsg( 'Creating ' + EntryName + ' entries' );

		SetIniString( Section, 'appserviceNameList', EntryName, PropFileName );
		SetIniString( Section, 'brkrLogAppend', '0', PropFileName );
		SetIniString( Section, 'brkrLoggingLevel', '3', PropFileName );
		SetIniString( Section, 'brokerLogFile', ExpandConstant( '{app}' ) + '\autoedgethefactory\server\logs\' + EntryName + '.broker.log', PropFileName );
		SetIniString( Section, 'controllingNameServer', 'NS1', PropFileName );
		SetIniString( Section, 'initialSrvrInstance', '1', PropFileName );
		SetIniString( Section, 'keyAlias', 'default_server', PropFileName );
		SetIniString( Section, 'operatingMode', OpMode, PropFileName );
		SetIniString( Section, 'portNumber', Port, PropFileName );
		SetIniString( Section, 'PROPATH', ProPath, PropFileName );
		SetIniString( Section, 'srvrLogAppend', '0', PropFileName );
		SetIniString( Section, 'srvrLogFile', ExpandConstant( '{app}' ) + '\autoedgethefactory\server\logs\' + EntryName + '.server.log', PropFileName );
		SetIniString( Section, 'srvrMaxPort', txtAETFASMaxPort.Text, PropFileName );
		SetIniString( Section, 'srvrMinPort', txtAETFASMinPort.Text, PropFileName );
		SetIniString( Section, 'srvrStartupParam', Startup, PropFileName );
		SetIniString( Section, 'uuid', UUID, PropFileName );
		SetIniString( Section, 'workDir', WorkDir, PropFileName );
	  SetIniString( Section, 'autoStart', '1', PropFileName );
	end;
end;

{ === PROCEDURE DoUpdateUBrokerPropertiesFile =========================================== }
{ =																						= }
{ =		Add the required brokers to the ubroker.properties file.						= }
{ =																						= }
{ ======================================================================================= }

procedure DoUpdateUBrokerPropertiesFile();
var
	FileName	: string;
	Section		: string;
	AppServerNameList : string;
begin
	if isComponentSelected( 'AETF_SERVER' ) then
	begin
		FileName := ExpandConstant( '{app}\autoedgethefactory\server\cfg\aetf.ubroker.properties' );
    Section := 'UBroker.AS.' + txtAEFAppserverName.Text;

		{ Make sure the file exists (it shouldn't, so create) }
		SaveStringToFile(FileName, '', false);

		{ Add the asAutoEdgeHQ AppServer }
		DoAddBroker2UBrokerFile(
		            FileName,
								Section,
								txtAEFAppserverName.Text,
								'State-free',
								txtAETFASBrokerPort.Text,
                ExpandConstant('./autoedgethefactory/server/bin;./autoedgethefactory/shared/bin;./referencecomponents/businesscomponents/bin;./referencecomponents/dataaccess/bin;./referencecomponents/enterpriseservices/bin;./referencecomponents/commoninfrastructure/server/bin;./referencecomponents/commoninfrastructure/shared/bin;./referencecomponents/support/bin;./autoedgethefactory/server/src;./autoedgethefactory/shared/src;./referencecomponents/businesscomponents/src;./referencecomponents/dataaccess/src;./referencecomponents/enterpriseservices/src;./referencecomponents/commoninfrastructure/server/src;./referencecomponents/commoninfrastructure/shared/src;./referencecomponents/support/src;./autoedgethefactory/server/tests;./autoedgethefactory/shared/tests;{code:getDLCDirectory};{code:getDLCDirectory}/bin'),
								'-pf ./autoedgethefactory/server/cfg/server.pf',
                '0da8f650f94beecc:13f73c94:131ce84799f:-8000',
								ExpandConstant( '{app}' ));

		{ Add the startup procedures }
		if not (txtAEFAppserverName.Text = 'asAutoEdgeTheFactory') then
		  AppServerNameList := txtAEFAppserverName.Text + ',';
		 
		SetIniString(Section, 'appserviceNameList', AppServerNameList + 'asAutoEdgeTheFactory', FileName);
		
		SetIniString(Section, 'srvrActivateProc', 'OpenEdge/CommonInfrastructure/Server/as_activate.p', FileName );
		SetIniString(Section, 'srvrConnectProc', 'OpenEdge/CommonInfrastructure/Server/as_connect.p', FileName );
		SetIniString(Section, 'srvrDeactivateProc', 'OpenEdge/CommonInfrastructure/Server/as_deactivate.p', FileName );
		SetIniString(Section, 'srvrDisconnProc', 'OpenEdge/CommonInfrastructure/Server/as_disconnect.p', FileName );
		SetIniString(Section, 'srvrShutdownProc', 'OpenEdge/CommonInfrastructure/Server/as_shutdown.p', FileName );
		SetIniString(Section, 'srvrStartupProc', 'OpenEdge/CommonInfrastructure/Server/as_startup.p', FileName );

		{ merge to installed properties file in DLC }
		DoMergeProperties('update',
						  'ubroker',
						  ExpandConstant('{code:getDLCDirectory}\properties\ubroker.properties'),
						  FileName,
						  ExpandConstant('{app}\autoedgethefactory\server'));

	end;
end;

{ === PROCEDURE DoUpdatePropertyFiles =================================================== }
{ =																						= }
{ =		Make changes to the Progress Property files and put in the new services.		= }
{ =		These are the WebSpeed, AppServer and Database services. The broker port		= }
{ =		numbers are taken from the PortsPage.											= }
{ =																						= }
{ ======================================================================================= }

procedure DoUpdatePropertyFiles;
begin
	DebugMsg( 'Updating Progress Properties Files' );

	{ Update the conmgr.properties file }
	DoUpdateConmgrPropertiesFile();

	{ Update the ubroker.properties file }
	DoUpdateUBrokerPropertiesFile();
end;

{ === PROCEDURE RunSelectedTasks ======================================================== }
{ =																						= }
{ =		Procedure to run selected tasks													= }
{ =																						= }
{ ======================================================================================= }

procedure RunSelectedTasks;
var
	ret		: integer;
	bRet	: boolean;
	strDirectory, strCmd	: string;
begin
  DebugMsg( 'Running selected tasks' );

	if IsTaskSelected('StartAllServers') then
	begin  
    strDirectory := ExpandConstant('{app}\autoedgethefactory\server\cfg');
    strCmd := strDirectory + '\StartAll.cmd';
  
  	bRet := Exec( strCmd ,
            '',
  				  strDirectory,
  				  SW_HIDE,
  				  ewWaitUntilTerminated,
  				  ret );
  
  	if not bRet then
  		MsgBox( 'Return code: ' + intToStr( ret ) + ' [ ' + SysErrorMessage( ret ) + ' ]', mbInformation, MB_OK );
  end;  		
end;

{ === PROCEDURE FixSourceFiles ========================================================== }
{ =																						= }
{ =		Installation Source Fixing Routine												= }
{ =																						= }
{ =		This procedure is used to fix some of the source problems related to paths,		= }
{ =		such as external procedure definitions and the likes.							= }
{ =																						= }
{ ======================================================================================= }

procedure FixSourceFiles;
var
	FileName	: string;
	FileBody	: string;
begin
	DebugMsg( 'Running FixSourceFiles()' );

	{ used to fix dll path for UUID here. Procedure stub left for future use }

end;

{ === PROCEDURE ConfigureInstallation =================================================== }
{ =																						= }
{ =		Installation Configuration Routine												= }
{ =																						= }
{ =		This procedure is used to create and configure all necessary control files,		= }
{ =		such as batch files, command files, Progress PF files and the likes. It is		= }
{ =		also used to copy files to the necessary places that cannot be handled by		= }
{ =		the InnoSetup utility itself.													= }
{ =																						= }
{ =		The Procedure uses the Configuration WizardPage to show working progress.		= }
{ =																						= }
{ ======================================================================================= }

procedure ConfigureInstallation;
var
    ParentNode, ChildNode : Variant;	
begin
	DebugMsg( 'Running ConfigureInstallation()' );

	SetDLCDirectory();

	{ ======================================================================= }
	{ === *1* Copy databases, restore them and then run PROSTRCT REPAIR   === }
	{ ===     on the databases because of directory changes 			        === }
	{ ======================================================================= }
	if isComponentSelected( 'AETF_SERVER' ) then
	begin
		{ Restore the databases to normal structure }
		DoProRestore(ExpandConstant( '{app}\autoedgethefactory\server\db\aetf.db' ),
     					   ExpandConstant( '{app}\autoedgethefactory\server\db\aetf.bup' ),
      					 ExpandConstant( '{app}\autoedgethefactory\server\db\' ));

    { Start config XML file }
    serverConfigXML := CreateOleObject('MSXML2.DOMDocument.6.0');
    serverConfigXML.async := False;
    serverConfigXML.resolveExternals := False;
        
    ParentNode := serverConfigXML.createElement('configs');
    ParentNode.setAttribute('xmlns:xsi', 'http://www.w3.org/2001/XMLSchema-instance');
    serverConfigXML.documentElement := ParentNode;
  
    ChildNode := serverConfigXML.createElement('config');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    
    ChildNode := serverConfigXML.createElement('name');
    ChildNode.text := 'default';
    ParentNode.appendChild(ChildNode);
	end;

	if isComponentSelected( 'AETF_CLIENT' ) then
	begin
    { Start config XML file }
    clientConfigXML := CreateOleObject('MSXML2.DOMDocument.6.0');
    clientConfigXML.async := False;
    clientConfigXML.resolveExternals := False;
        
    ParentNode := clientConfigXML.createElement('configs');
    ParentNode.setAttribute('xmlns:xsi', 'http://www.w3.org/2001/XMLSchema-instance');
    clientConfigXML.documentElement := ParentNode;
  
    ChildNode := clientConfigXML.createElement('config');
    ParentNode.appendChild(ChildNode);
    ParentNode := ChildNode;
    
    ChildNode := clientConfigXML.createElement('name');
    ChildNode.text := 'default';
    ParentNode.appendChild(ChildNode);
	end;	

	{ ======================================== }
	{ === *2* Updating Configuration Files === }
	{ ======================================== }
	DoUpdateConfigFiles;

	{ ============================================== }
	{ === *3* Updating Progress Properties Files === }
	{ ============================================== }
  DoUpdatePropertyFiles;
  FixSourceFiles;

	if isComponentSelected( 'AETF_CLIENT' ) then
	begin
    { Write config XML file }
    clientConfigXML.save(ExpandConstant('{app}\autoedgethefactory\client\cfg\config.xml'));
  end;

	if isComponentSelected( 'AETF_SERVER' ) then
	begin
    { Write config XML file }
    serverConfigXML.save(ExpandConstant('{app}\autoedgethefactory\server\cfg\config.xml'));
  end;
  
	{ ============================== }
	{ === *4* Run Selected Tasks === }
	{ ============================== }

	RunSelectedTasks();

	{ ================ }
	{ === *5* Done === }
	{ ================ }

	DebugMsg( 'Done' );
end;

{ === PROCEDURE CurStepChanged ========================================================== }
{ =																						= }
{ =		Perform our own pre-install and post-install tasks.								= }
{ =																						= }
{ ======================================================================================= }

procedure CurStepChanged(CurStep: TSetupStep);
begin
	DebugMsg( 'CurStepChanged()' );

  { Right after installing the files, we will modify them }
	if ( CurStep = ssPostInstall ) then
	begin
		// crHand.Show();
//		InstallServers();
		ConfigureInstallation();
		// crHand.Hide();
	end;

end;

{ === FUNCTION NextButtonClick ========================================================== }
{ =																						= }
{ =		'Next' Button Click Event Handler												= }
{ =																						= }
{ =		This function is called whenever the user clicks on the 'Next' button in the	= }
{ =		setup wizard. We will get the current page ID on which we can base our actions.	= }
{ =		The current page will be displayed as long as we do not return TRUE from this	= }
{ =		event handler. The moment we return TRUE, the next page in the sequence is		= }
{ =		displayed to the user.															= }
{ =																						= }
{ = 	NOTE: 	Validation routines for a page can be put into the include file (.inc)	= }
{ =				for that page on the nextbuttonclick event.								= }
{ =																						= }
{ ======================================================================================= }

function NextButtonClick( currentPage : integer ) : boolean;
begin
	DebugMsg( 'Next Clicked!' );

	{	If we are at the 'Ready to Install' page, we better make sure we have the	}
	{	correct DLC value so Inno can also use it to do [icons] and [ini] stuff!	}

	if ( currentpage = wpReady ) then
		SetDLCDirectory();

	{ The default is to go to the next page }
	Result := true;
end;

{ === FUNCTION BackButtonClick ========================================================== }
{ =																						= }
{ =		'Back' Button Click Event Handler												= }
{ =																						= }
{ =		This function is called whenever the user clicks on the 'Back' button in the	= }
{ =		setup wizard. We will get the current page ID on which we can base our actions.	= }
{ =		The current page will be displayed as long as we do not return TRUE from this	= }
{ =		event handler. The moment we return TRUE, the previous page in the sequence is	= }
{ =		displayed to the user.															= }
{ =																						= }
{ ======================================================================================= }

function BackButtonClick( currentPage : integer ) : boolean;
begin
	//	if bShowDebugMsg then
	//		MsgBox( 'Back Clicked!', mbInformation, MB_OK );
	Result := true;
end;

{ === PROCEDURE CurPageChanged ========================================================== }
{ =																						= }
{ =		Event procedure called after a new page is shown. The new page is identified	= }
{ =		by the CurPageID value.															= }
{ =																						= }
{ ======================================================================================= }

procedure CurPageChanged( CurPageID : Integer );
begin
	//	if bShowDebugMsg then
	//		MsgBox( 'Page : ' + IntToStr( CurPageID ), mbInformation, MB_OK );
end;

{ === FUNCTION ShouldSkipPage =========================================================== }
{ =																						= }
{ =		Event procedure called to check whether a page should be skipped or not.		= }
{ =																						= }
{ ======================================================================================= }

function ShouldSkipPage( PageID: Integer ) : Boolean;
begin
	Result := false;

	{ Skip AppServer Client Page if CLIENT component is not selected }
	if (( PageID = iAppServerClientPageID ) and not isComponentSelected( 'AETF_CLIENT' )) then
		Result := true;

	{ Skip AdminServer Port Page if SERVER component is not selected }
	if (( PageID = iAdminServerPortPageID ) and not isComponentSelected( 'AETF_SERVER' )) then
		Result := true;

	{ Skip Database Broker Ports Page if SERVER component is not selected }
	if (( PageID = iDBBrokerPortsPageID ) and not isComponentSelected( 'AETF_SERVER' )) then
		Result := true;

	{ Skip AppServer Broker Ports Page if SERVER component is not selected }
	if (( PageID = iASBrokerPortsPageID ) and not isComponentSelected( 'AETF_SERVER' )) then
		Result := true;

	{ Skip BPM Server Ports Page if BPM_SERVER_SUPPORT component is not selected }
	if (( PageID = iBpmServerPageID ) and not isComponentSelected( 'BPM_SERVER_SUPPORT' )) then
		Result := true;
		
end;

{ === PROCEDURE UndoConfiguration ======================================================= }
{ =																						= }
{ =		Procedure to undo the changes made to the Progress Property files				= }
{ =																						= }
{ ======================================================================================= }

procedure UndoConfiguration;
var
	FileName 	: string;
	ret			: integer;
begin
	DebugMsg( 'Undoing changes made to Progress Property Files' );


end;

{ === FUNCTION InitializeUninstall ====================================================== }
{ =																						= }
{ =		Event procedure for initializing the uninstall wizard							= }
{ =																						= }
{ ======================================================================================= }

function InitializeUninstall() : boolean;
begin
	DebugMsg( 'Running InitializeUninstall()' );

	{	Removed for now since the change in DLC gathering. The only way to actually		}
	{	make this work is to store the selected OpenEdge Release and DLC Values in		}
	{	the registry so these can be picked up at this uninstall time and used.			}
	{	For now, this stuff will be disabled until such time we want this enabled		}
	{	and we have to implement the DLC value storage.									}

//	if setDLCDirectory() then
//	begin
//		{ Remove the entries created in the Progress Property Files }
//		UndoConfiguration;
//	end;

	Result := true;
end;

procedure SetLineEndToWindows();
var
	FileName, FileBody : string;
begin
	FileName := ExpandConstant( CurrentFileName() );

	if LoadStringFromFile( FileName, FileBody ) then
	begin
		StringChangeEx(FileBody, #10, #13#10, true);
		SaveStringToFile( FileName, FileBody, false );
	end;
end;

[UninstallDelete]


[CustomMessages]
AppServerClientCaption=Progress|OpenEdge AppServer Client Configuration
AppServerClientDescription=Configure the client connection parameters to the AppServers
BpmServerCaption=Progress|Savvion BPM Server 
BpmServerDescription=Specify the Progress|Savvion server hostname and port 
adminportCaption=Progress|OpenEdge AdminServer Port Setup
adminportDescription=Specify the Progress|OpenEdge AdminServer port to be used
ASBrokerPortsCaption=Progress|OpenEdge AppServer Broker Configuration 
ASBrokerPortsDescription=Progress|OpenEdge AppServer Broker Configuration  
DBBrokerPortsCaption=Progress|OpenEdge Database Broker Setup
DBBrokerPortsDescription=Please provide the database broker ports (TCP) to use

[Tasks]
Components: AETF_SERVER; Name: StartAllServers; Description: "Start the AutoEdge servers (DB, AppServer)";
 

